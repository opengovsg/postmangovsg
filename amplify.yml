version: 0.1
frontend:
  phases:
    preBuild:
      commands:
        - cd frontend
        - npm ci
    build:
      commands:
        - npm run build
  artifacts:
    # IMPORTANT - Please verify your build output directory
    baseDirectory: frontend/build
    files:
      - '**/*'
  customHeaders:
    - pattern: '**/*'
      headers:
      - key: 'Strict-Transport-Security'
        value: 'max-age=5184000; includeSubDomains'
      - key: 'X-Frame-Options'
        value: 'DENY'
      - key: 'X-XSS-Protection'
        value: '1; mode=block'
      - key: 'X-Content-Type-Options'
        value: 'nosniff'
      - key: 'X-DNS-Prefetch-Control'
        value: 'off'
      - key: 'X-Download-Options'
        value: 'noopen'
      - key: 'Referrer-Policy'
        value: 'same-origin'
      - key: 'Content-Security-Policy'
        value: 'connect-src self https://*.postman.gov.sg https://postmangovsg-dev-upload.s3.ap-northeast-1.amazonaws.com/ https://postmangovsg-upload.s3.ap-northeast-1.amazonaws.com; 
        style-src-elem self https://*.postman.gov.sg https://fonts.googleapis.com;
        font-src self https://*.postman.gov.sg https://fonts.gstatic.com;
        default-src self https://*.postman.gov.sg'